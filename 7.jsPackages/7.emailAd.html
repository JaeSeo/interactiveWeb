<!-- 서비스 홍보를 위해 웹사이트 방문자들의 이메일을 입력 받고 있는데요. 처음에는 'Send' 버튼이 회색(#9E9E9E)으로 비활성화되어 있다가, 방문자가 올바른 형태의 이메일을 입력하면 파란색(#4D79C2)으로 활성화되어야 합니다.



일반적으로는 정규표현식을 사용하겠지만, 이번 과제에서는 그냥 String 패키지의 기능들만 활용해서 이 두 가지만 확인합시다:
https://ko.wikipedia.org/wiki/%EC%A0%95%EA%B7%9C_%ED%91%9C%ED%98%84%EC%8B%9D
이메일에는 @가 포함되어 있어야 한다.
@ 뒤에는 최소 1개 이상의 .이 포함되어 있어야 한다. -->

<!DOCTYPE html>
<html>
  <head>
    <title>Consulting Market</title>
    <meta charset="utf-8" />

    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <link href="css/styles.css" rel="stylesheet" />
  </head>

  <body>
    <div class="hero-header">
      <div class="navbar">
        <a href="#" id="logo">
          <img src="images/logo.png" width="230">
        </a>

        <ul class="menu menu-left">
          <li><a href="#">PRODUCTS</a></li>
          <li><a href="#">BLOG</a></li>
        </ul>

        <ul class="menu menu-right">
          <li><a href="#">HOME</a></li>
          <li><a href="#">ABOUT</a></li>
          <li><a href="#">LOGIN</a></li>
        </ul>
      </div>

      <div class="container">
        <div class="left">
          <h2>더 많은 <b>정보와 이벤트</b> 등을<br> 받아보고 싶으면 <b>이메일을 입력해주세요!</b></h2>

          <input id="email-input" type="email" placeholder="이메일">
          <input id="submit-btn" type="submit" value="Send">
        </div>

        <img id="main-img" src="images/desk.png" width="400">
      </div>
    </div>

    <script
      src="https://code.jquery.com/jquery-3.2.1.min.js"
      integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
      crossorigin="anonymous"></script>
    <script>
      // 여기에 코드를 입력하세요.
      $('#email-input').on('input', activate);
      
      function activate() {
          var location = $('#email-input').val().indexOf('@');
          var afterAt = $('#email-input').val().substring(location);
          
          if (location !== -1 && afterAt.indexOf('.') !== -1) {
              $('#submit-btn').css('background-color', '#4D79C2');
          } else {
              $('#submit-btn').css('background-color', '#9E9E9E');              
          }
      }
    </script>
  </body>
</html>

<!-- 해설 -->
<!-- 
먼저 이벤트를 등록합니다. email-input이 한 글자라도 바뀔 때마다 실행되어야 하기 때문에, input 이벤트를 사용합니다.

// 이벤트 등록
$("#email-input").on('input', ValidateEmail);

function ValidateEmail() {
  // 이메일이 입력될 때마다 실행될 코드
}
ValidateEmail 함수에서는 입력된 문자열이 주어진 조건을 만족하는지 확인하고, 그에 맞는 css를 지정해줍니다.

@가 있는지는 $('#email-input').val().indexOf('@') 값을 통해 쉽게 확인할 수 있습니다. @가 없다면 이 값이 -1, 있다면 index 값이 나오게 됩니다. 이 값을 atPos 라고 저장해둡시다.

var atPos = $('#email-input').val().indexOf('@');
@ 뒤에 .이 있는지 확인하기 위해, @ 뒤쪽을 substring으로 만들어서 저장합시다.

var atPos = $('#email-input').val().indexOf('@');

var emailSubstr = $('#email-input').val().substr(atPos);
이 emailSubstr을 사용해서 @ 뒤에 .이 있는지 확인하면 됩니다. 코드를 완성해보면,

<script>
  $("#email-input").on('input', validateEmail);

  function validateEmail() {
    var atPos = $('#email-input').val().indexOf('@');
    var emailSubstr = $('#email-input').val().substr(atPos);
    if (atPos !== -1 && emailSubstr.indexOf('.') !== -1) {
      $('#submit-btn').css('background-color', "#4d79c2");
    } else {
      $('#submit-btn').css('background-color', "#9e9e9e");
    }
  }
</script> -->